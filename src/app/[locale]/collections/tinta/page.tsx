import Navbar from "@/components/Navbar";
import Image from "next/image";
import { promisify } from "util";
import sizeOf from "image-size";
import fs from "fs";
import path from "path";
import { getTranslations } from "next-intl/server";
import metadata from "./metadata";

// const sizeOfAsync = promisify(sizeOf);

export async function generateMetadata({
  params,
}: {
  params: { locale: string };
}) {
  const { locale } = await params;
  const t = await getTranslations({ locale, namespace: "Collections" });

  return {
    title: "Tinta",
    description: t("tinta-description"),
  };
}

// async function fetchTintaImages() {
//   const imagesDir = path.join(process.cwd(), "public/images/tinta");
//   const files = fs
//     .readdirSync(imagesDir)
//     .filter((file) => /\.(png|jpe?g|gif|webp)$/.test(file));

//   const metadata = await Promise.all(
//     files.map(async (file) => {
//       const dimensions = await sizeOfAsync(path.join(imagesDir, file));
//       if (!dimensions) {
//         throw new Error(`Could not get dimensions for image: ${file}`);
//       }
//       return {
//         src: `/images/tinta/${file}`,
//         width: dimensions.width!,
//         height: dimensions.height!,
//         isHorizontal: dimensions.width! > dimensions.height!,
//       };
//     })
//   );

//   return metadata;
// }

export default async function Home() {
  const images = metadata;
  const t = await getTranslations("Collections");
  return (
    <>
      <Navbar light={false} />

      <div className="h-[20rem] md:h-[36rem] flex justify-center md:justify-start items-center">
        <div className="md:container px-4">
          <svg
            version="1.1"
            id="svg2"
            width="400"
            height="400"
            viewBox="0 0 232.54668 160.73334"
            xmlns="http://www.w3.org/2000/svg"
            className="w-40 md:w-52">
            <g id="g8" transform="matrix(1.3333333,0,0,-1.3333333,0,160.73333)">
              <g id="g10" transform="scale(0.1)">
                <path
                  d="M 1660.26,123.969 V 19.1719 h 21.82 c 11.86,0 21.19,3.8594 27.97,11.5898 6.79,7.7266 10.18,17.6992 10.18,29.9571 v 21.8906 c 0,12.1211 -3.39,22.0386 -10.18,29.7696 -6.78,7.711 -16.11,11.59 -27.97,11.59 z M 1636.37,0 v 143.141 h 46.4 c 18.15,0 32.92,-5.68 44.29,-17.012 11.37,-11.34 17.06,-25.93 17.06,-43.7501 V 60.6484 c 0,-17.8867 -5.69,-32.4687 -17.06,-43.7382 C 1715.69,5.62891 1700.92,0 1682.77,0 Z m -233.98,0 h -23.89 v 143.141 h 23.89 z m -336.03,78.5508 h 27.73 c 9.57,0 16.55,1.8281 20.94,5.5 4.39,3.6601 6.58,9.2695 6.58,16.8082 0,7.2 -2.16,12.86 -6.48,16.961 -4.33,4.09 -10.92,6.149 -19.76,6.149 h -29.01 z m 0,-19.1719 V 0 h -23.88 v 143.141 h 52.89 c 15.98,0 28.35,-3.621 37.06,-10.821 8.71,-7.211 13.07,-17.5 13.07,-30.871 0,-7.4099 -1.91,-13.7888 -5.75,-19.117 -3.83,-5.3437 -9.42,-9.6211 -16.76,-12.832 8.06,-2.5508 13.86,-6.7305 17.4,-12.5312 3.54,-5.7969 5.31,-12.9297 5.31,-21.379 V 23.6914 c 0,-4.2031 0.53,-8.293 1.57,-12.293 1.05,-3.99996 2.82,-7.04684 5.31,-9.13668 L 1152.58,0 H 1128 c -2.61,2.16016 -4.31,5.55859 -5.06,10.2188 -0.75,4.6523 -1.13,9.2109 -1.13,13.6718 v 11.5 c 0,7.3399 -2.1,13.168 -6.29,17.5 -4.19,4.3203 -9.97,6.4883 -17.3,6.4883 z M 732.703,123.969 V 19.1719 h 21.824 c 11.86,0 21.184,3.8594 27.969,11.5898 6.781,7.7266 10.176,17.6992 10.176,29.9571 v 21.8906 c 0,12.1211 -3.395,22.0386 -10.176,29.7696 -6.785,7.711 -16.109,11.59 -27.969,11.59 z M 708.813,0 v 143.141 h 46.402 c 18.148,0 32.922,-5.68 44.289,-17.012 11.367,-11.34 17.055,-25.93 17.055,-43.7501 V 60.6484 c 0,-17.8867 -5.688,-32.4687 -17.055,-43.7382 C 788.137,5.62891 773.363,0 755.215,0 Z M 406.117,53.3789 h 42.371 l -20.742,61.1521 h -0.59 z m 49.156,-19.957 H 399.234 L 387.832,0 h -24.184 l 52.594,143.141 h 22.613 L 490.859,0 H 466.578 Z M 30.9688,143.141 72.1602,33.0313 H 72.75 l 41.289,110.1097 h 30.969 V 0 h -23.891 v 48.7617 l 2.36,62.0273 -0.59,0.102 L 80.418,0 H 64.3945 L 22.1211,110.602 21.5313,110.5 23.8906,48.7617 V 0 H 0 V 143.141 Z M 486.32,905.133 c -0.679,-21.965 15.532,-40.211 36.2,-40.735 19.472,-0.492 34.523,15.012 34.871,35.934 0.355,21.309 -15.496,39.258 -35.348,40.027 -19.34,0.754 -35.094,-14.781 -35.723,-35.226 z m 161.121,210.027 c 32.239,6.17 64.856,11.14 92.832,30.27 19.141,13.09 26.504,29.37 20.094,44.37 -5.859,13.72 -19.648,18.2 -43.578,14.47 -63.82,-9.96 -127.496,-20.99 -191.512,-29.48 -122.375,-16.23 -245,-30.58 -367.394,-46.68 -27.785,-3.65 -55.301,-10.28 -82.4807,-17.31 -23.5234,-6.08 -37.8437,-26.69 -35.4335,-46.89 2.0585,-17.24 18.1835,-28.45 43.6523,-30.1 6.2266,-0.4 12.5508,-0.65 18.7419,-0.06 28,2.65 56.09,4.77 83.918,8.69 40.735,5.75 81.207,13.35 121.934,19.18 18.82,2.7 27.051,-4.51 29.715,-23.17 0.8,-5.61 0.793,-11.43 0.336,-17.09 -5.203,-64.161 -10.707,-128.297 -15.852,-192.469 -10.695,-133.383 -6.254,-266.836 -1.324,-400.278 0.324,-8.781 1.656,-17.629 3.508,-26.23 2.965,-13.805 10.488,-22.629 25.183,-20.445 22.828,0.207 30.196,9.046 30.856,30.648 2.867,94.441 3.992,189.027 10.426,283.242 7.109,104.078 19.285,207.813 29.328,311.692 3.625,37.49 29.847,68.57 67.578,76.62 52.953,11.3 106.285,20.83 159.472,31.02 z M 1342.15,626.242 c -14.7,4.188 15.05,79.352 38.09,79.352 9.46,-3.922 0,-82.77 -38.09,-79.352 z m 353.92,4.031 c -11.11,5.02 -17.78,-1.937 -21.8,-11.476 -9.59,-22.801 -27.39,-37.113 -50.2,-43.539 -23.37,-6.582 -47.52,-12.418 -71.63,-13.969 -44.05,-2.832 -67.56,14.293 -82.86,55.738 -3.4,9.211 -6.36,18.86 -7.55,28.547 -2.39,19.551 -3.65,39.254 -4.96,58.922 -2.1,31.363 -22.08,56.672 -52.89,66.422 -24.48,7.75 -50.31,-1.516 -70.07,-26.035 -6.14,-7.621 -11.33,-16.211 -15.77,-24.957 -16.38,-32.293 -22.99,-66.938 -20.12,-102.735 1.71,-21.414 -4.6,-36.41 -24.11,-45.671 -7.05,-3.344 -13.72,-7.571 -20.96,-10.387 -47.89,-18.637 -81.79,-1.426 -95.28,48.172 -1.22,4.496 -2.19,9.086 -2.87,13.695 -8,53.918 1.98,106.648 11.23,159.332 2.42,13.785 12.67,20.391 26.87,21.848 46.64,4.8 93.35,9.191 139.79,15.492 32.95,4.473 65.7,10.976 98.09,18.512 6.24,1.449 13.86,11.445 14.69,18.25 1.31,10.636 -7.94,15.953 -18.54,16.578 -4.67,0.273 -9.38,-0.028 -14.06,-0.246 -47.35,-2.207 -94.7,-5.989 -142.05,-6.012 -22.3,-0.012 -44.86,6.133 -66.81,11.504 -13.08,3.199 -18.97,13.726 -16.1,27.859 1.75,8.641 3.02,17.371 4.61,26.043 2.23,12.11 -1.87,22.36 -14.27,23.387 -36.78,3.039 -48.08,7.496 -57.88,-36.399 -1.13,-5.07 -2.01,-10.195 -2.92,-15.308 -2.77,-15.539 -11.88,-27.219 -25.65,-33.293 -13.61,-6.004 -28.41,-11.016 -43.1,-12.539 -30.01,-3.117 -60.318,-3.27 -90.459,-5.332 -11.867,-0.813 -23.871,-2.473 -35.347,-5.492 -19.156,-5.043 -29.598,-18.098 -28.996,-33.813 0.621,-16.281 12.59,-29.168 32.929,-31.75 16.414,-2.082 33.328,-2.613 49.805,-1.246 29.038,2.406 57.888,6.891 86.848,10.301 17.56,2.062 25.22,-4.399 20.3,-18.567 -22.8,-65.699 -45.92,-131.296 -69.94,-196.566 -4.18,-11.352 -12.56,-21.438 -20.196,-31.176 -6.856,-8.734 -14.528,-7.969 -18.828,2.86 -4.977,12.531 -9.664,25.242 -13.344,38.195 -7.945,27.969 -13.543,56.699 -22.996,84.125 -23.863,69.246 -70.41,82.207 -123.953,32.465 -29.516,-27.418 -53.723,-60.528 -80.246,-91.137 -3.875,-4.473 -7.309,-9.32 -13.098,-16.754 -0.707,8.539 -1.016,13.035 -1.461,17.524 -1.988,20.132 -2.898,40.453 -6.395,60.324 -2.714,15.433 -12.898,26.301 -29.535,28.023 -15.496,1.602 -25.406,-7.125 -32.25,-20.074 -0.73,-1.375 -1.465,-2.75 -2.191,-4.129 -21.297,-40.129 -45.676,-78.133 -79.145,-109.402 -7.269,-6.793 -16.832,-11.157 -25.339,-16.637 -3.934,8.742 -10.579,17.266 -11.321,26.273 -2.808,34.036 -5.285,68.247 -4.82,102.348 0.394,28.984 5.449,57.879 7.598,86.875 1.308,17.692 -8.926,28.137 -26.707,29.332 -19.766,1.332 -32.641,-6.84 -35.899,-26.789 -9.047,-55.398 -18.687,-111.254 -8.101,-167.238 5.031,-26.594 13.136,-53.879 26.136,-77.399 17.895,-32.371 53.403,-35.101 80.981,-10.281 7.304,6.574 13.66,14.258 20.035,21.789 10.75,12.692 20.539,26.25 31.871,38.383 15.246,16.32 21.836,14.441 27.906,-6.512 2.028,-6.98 3.473,-14.176 6.051,-20.945 16.125,-42.32 49.168,-51.164 82.906,-20.953 16.586,14.851 30.606,32.543 45.844,48.898 18.074,19.403 35.434,39.555 54.539,57.895 19.145,18.379 36.309,13.574 47.609,-10.641 12.715,-27.25 25.497,-54.5 39.454,-81.125 22.039,-42.047 61.171,-47.703 94.105,-13.82 9,9.258 17.84,19.402 23.84,30.676 13.16,24.695 24.3,50.449 36.59,75.605 3.65,7.473 8.4,14.402 12.65,21.582 1.75,-0.551 3.49,-1.098 5.23,-1.644 2.17,-6.825 3.66,-13.957 6.64,-20.407 10.2,-22.035 18.58,-45.386 31.96,-65.363 21.79,-32.512 55.07,-44.742 93.75,-41.359 30.17,2.64 57.48,13.945 83.13,29.633 4.37,2.675 9.36,6.796 13.8,6.48 22.19,-1.594 38.91,9.406 55.31,21.742 16.15,12.137 16,12.016 27.48,-5.504 20.46,-31.222 46.92,-56.676 85.28,-59.851 58.32,-4.832 114.17,6.773 164.31,38.812 19.07,12.18 31.9,29.696 39.16,51.035 3,8.813 3.96,18.36 -6.31,22.996"
                  id="path12"
                />
              </g>
            </g>
          </svg>
        </div>
      </div>

      <div className="bg-neutral-100">
        <div className="container h-fit py-12 mb-2 md:mb-4 flex flex-col items-center justify-center px-4 gap-y-4">
          <p className="font-light text-md leading-loose md:text-xl md:leading-loose text-neutral-400">
            {t("tinta-description")}
          </p>
          <a
            href="https://www.tintastyle.es/?lang=en"
            className="w-full flex items-center gap-x-2 py-1 text-md md:text-xl text-neutral-600 hover:text-neutral-700 duration-150">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 6l6 6l-6 6" />
            </svg>
            <span>{t("visit")}</span>
          </a>
        </div>
      </div>

      <div className="max-w-[120rem] mx-auto py-0 px-2 md:px-4">
        <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-2 md:gap-4">
          {images.map(({ src, width, height, isHorizontal }, index) => (
            <Image
              key={index}
              src={src}
              alt={`Tinta Image ${index + 1}`}
              width={isHorizontal ? width : 1000} // Adjust width for better grid layout
              height={isHorizontal ? height : 2000} // Adjust height for better grid layout
              className={`object-cover h-full w-full ${
                isHorizontal ? "col-span-1 md:col-span-2" : "col-span-1"
              }`}
              priority={index < 3} // Preload the first few images
            />
          ))}
        </div>
      </div>
    </>
  );
}
