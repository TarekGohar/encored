import Navbar from "@/components/Navbar";
import Image from "next/image";
import { promisify } from "util";
import sizeOf from "image-size";
import fs from "fs";
import path from "path";
import { getTranslations } from "next-intl/server";
import metadata from "./metadata";

export async function generateMetadata({
  params,
}: {
  params: { locale: string };
}) {
  const { locale } = await params;
  const t = await getTranslations({ locale, namespace: "Collections" });

  return {
    title: "Bariloche",
    description: t("bariloche-description"),
  };
}

// const sizeOfAsync = promisify(sizeOf);

// async function fetchBarilocheImages() {
//   const imagesDir = path.join(process.cwd(), "public/images/bariloche");
//   const files = fs
//     .readdirSync(imagesDir)
//     .filter((file) => /\.(png|jpe?g|gif|webp)$/.test(file));

//   const metadata = await Promise.all(
//     files.map(async (file) => {
//       const dimensions = await sizeOfAsync(path.join(imagesDir, file));
//       if (!dimensions) {
//         throw new Error(`Could not get dimensions for image: ${file}`);
//       }
//       return {
//         src: `/images/bariloche/${file}`,
//         width: dimensions.width!,
//         height: dimensions.height!,
//         isHorizontal: dimensions.width! > dimensions.height!,
//       };
//     })
//   );

//   return metadata;
// }

export default async function Home() {
  const images = metadata;
  console.log(images);
  const t = await getTranslations("Collections");

  return (
    <>
      <div>
        <Navbar light={false} />
        <div className="h-[20rem] md:h-[36rem] flex justify-center md:justify-start items-center">
          <div className="md:container px-4">
            <svg
              version="1.1"
              id="svg2"
              width="400"
              height="400"
              viewBox="0 0 429.39999 156.98666"
              xmlns="http://www.w3.org/2000/svg"
              className="w-64 md:w-96">
              <g transform="matrix(1.3333333,0,0,-1.3333333,0,156.98667)">
                <g id="g10" transform="scale(0.1)">
                  <path
                    d="m 1596.87,752.133 c 19.86,-0.43 36.28,15.363 36.28,34.894 0.01,19.7 -14.97,34.481 -34.66,34.207 -19.85,-0.277 -35.27,-14.91 -35.67,-33.836 -0.41,-19.179 14.72,-34.851 34.05,-35.265 z M 691.121,557.879 c -38.648,-48.867 -92.32,-73.285 -151.828,-85.836 -41.77,-8.809 -83.801,-9.02 -125.434,2.309 -26.437,7.199 -33.394,15.117 -34.273,42.511 -0.684,21.258 -0.137,42.559 -0.137,63.84 -0.531,0.172 -1.062,0.348 -1.594,0.524 7.282,50.199 11.399,101.125 22.747,150.402 11.074,48.078 34.156,58.703 70.351,60.125 42.121,1.648 84.777,5.004 125.512,-8.457 22.945,-7.582 46.215,-17.231 65.965,-30.817 68.687,-47.238 80.449,-129.164 28.691,-194.601 z M 415.293,1016.24 c 1.031,14.43 0.918,28.98 0.719,43.46 -0.301,22.28 9.41,38.66 30.644,45.29 18.168,5.66 37.196,8.6 46.629,10.7 36.141,-0.19 62.16,-3.62 76.403,-28.75 14.902,-26.3 5.109,-51.55 -11.036,-74.06 -33.218,-46.325 -76.847,-81.267 -125.48,-110.204 -4.934,-2.942 -15.336,-4.43 -18.086,-1.617 -4.715,4.816 -7.738,13.695 -7.348,20.64 1.778,31.555 5.301,63.004 7.555,94.541 z m 247,-190.615 c -29.43,13.848 -61.512,22.191 -92.598,32.406 -24.75,8.133 -28.523,17.106 -14.453,38.36 13.766,20.789 28.832,40.808 41.395,62.285 11.461,19.601 23.199,39.828 29.808,61.314 20.614,67.01 -11.507,128.24 -78.632,148.81 -22.364,6.85 -47.372,9.91 -70.657,8.11 -73.699,-5.68 -138.093,-37.43 -198.234,-78.19 -42.195,-28.6 -79.156,-62.88 -104.375,-107.79 -6.164,-10.973 -9.965,-23.973 -11.75,-36.481 -1.754,-12.281 5.117,-21.836 17.719,-26.086 11.797,-3.976 20.175,0.903 26.98,10.059 3.723,5.008 6.766,10.699 11.184,14.984 27.172,26.313 53.433,53.764 82.425,77.944 21.399,17.85 41.844,6.67 43.547,-21.32 0.375,-6.17 -0.515,-12.432 -0.984,-18.643 -6.027,-79.723 -12.086,-159.446 -19.547,-257.731 0,-42.906 0.098,-104.183 -0.125,-165.465 -0.027,-7.711 -0.683,-15.742 -2.891,-23.07 -6.832,-22.68 -24.687,-30.066 -45.894,-19.641 -45.508,22.368 -88.383,48.856 -126.922,81.907 -41.434,35.539 -74.2421,77.187 -89.6796,130.457 -3.8906,13.433 -5.8633,27.402 -9.3086,40.98 -3.7891,14.918 -15.2578,23.16 -28.2969,21.16 C 7.73047,797.949 -0.28125,787.184 0.0078125,771.566 0.0664063,768.465 0.554688,765.371 0.9375,762.285 10.793,682.918 47.5664,617.617 106.566,564.566 194.336,485.648 295.41,429.352 409.844,400.824 c 121.023,-30.172 228.664,1.883 318.519,86.895 64.364,60.886 80.559,146.777 47.496,224.801 -22.406,52.878 -62.789,89.207 -113.566,113.105 z M 2151,596.41 c -9.38,-13.394 -20.3,-26.887 -38.59,-24.719 -17.61,2.086 -25.47,17.442 -30.77,32.047 -4.51,12.438 -7.98,26.215 -7.62,39.282 1.32,48.007 25.01,86.402 55.67,123.003 49.78,-54.609 57.27,-118.289 21.31,-169.613 z m -1150,81.91 c -22.891,-42.855 -47.414,-84.847 -71.566,-127.027 -1.5,-2.629 -3.778,-5.27 -6.36,-6.727 -5.14,-2.906 -12.48,-8.316 -15.758,-6.621 -4.804,2.481 -7.339,10.078 -9.843,15.918 -1.34,3.129 -0.582,7.153 -0.774,10.766 7.692,55.426 28.492,103.48 76.219,136.691 7.895,5.493 17.082,9.383 23.273,0.418 4.289,-6.215 7.789,-17.836 4.809,-23.418 z m 815.53,37.489 c 15.42,93.152 43.79,181.578 97.7,260.425 1.47,2.153 2.5,4.602 3.74,6.914 1.96,-1.214 3.91,-2.429 5.87,-3.644 3.05,-106.785 -45.91,-195.641 -97.85,-283.457 -1.96,0.09 -3.91,0.176 -5.87,0.266 -1.3,6.511 -4.61,13.359 -3.59,19.496 z m 1196.98,50.468 c 4.01,10.926 9.62,21.801 16.92,30.778 3.88,4.777 14.44,9.25 18.97,7.211 6.66,-3.004 10.63,-11.953 14.18,-16.395 -3.32,-20.562 -15.24,-29.793 -28.27,-37.355 -7.22,-4.188 -15.88,-5.911 -23.88,-8.743 0.55,8.219 -0.65,17.079 2.08,24.504 z m 197.89,-12.754 c -10.63,5.09 -17.66,-1.578 -22.55,-10.722 -0.74,-1.375 -1.36,-2.809 -2.15,-4.149 -35.69,-60.711 -92.65,-87.011 -159.29,-96.675 -15.97,-2.321 -25.78,7.968 -25.52,24.23 0.25,16.363 9.88,26.727 24.46,32.926 33.94,14.437 59.03,38.633 76.56,70.535 28.24,51.398 -5.47,116.051 -63.93,123.383 -43.8,5.496 -85.13,-20.953 -98.97,-68.485 -7.71,-26.484 -11.29,-55.222 -10.72,-82.82 1.19,-57.023 -26.82,-96.351 -70.01,-127.918 -12.1,-8.844 -26.96,-17.902 -41.84,-8.918 -14.36,8.676 -12.07,25.766 -10.83,39.91 2.04,23.25 7.37,46.223 9.14,69.477 2.57,34.016 4.97,68.223 3.99,102.25 -0.51,17.805 -12.88,31.894 -31.72,36.433 -18.86,4.54 -32.07,-5.261 -42.51,-19.585 -13.77,-18.891 -27.25,-37.997 -40.83,-57.028 -7.54,-10.578 -14.58,-21.566 -22.81,-31.594 -2.67,-3.253 -8.38,-4.039 -12.69,-5.953 -1.32,4.602 -3.81,9.243 -3.67,13.797 0.21,6.653 2.15,13.281 3.61,19.86 18.57,83.648 37.46,167.222 55.59,250.963 4.94,22.79 9.29,45.95 10.94,69.15 1.77,24.67 -20.74,42.36 -40.24,31.86 -9.2,-4.96 -17.19,-16.69 -20.5,-27.02 -8.25,-25.64 -13.71,-52.2 -19.89,-78.47 -17.46,-74.276 -33.72,-148.913 -63.1,-219.737 -22.79,-54.942 -49.66,-107.649 -91.66,-151.004 -20.24,-20.883 -44.53,-34.16 -74.49,-34.41 -25.67,-0.215 -40.34,12.492 -39.22,37.703 2.03,45.789 21.04,83.32 61.57,107.312 7.36,4.352 18.32,6.477 26.52,4.676 13.4,-2.941 24.74,-5.004 32.46,8.984 6.78,12.293 2.85,28.918 -9.53,39.266 -14.74,12.332 -32.66,16.063 -49.95,9.762 -18.77,-6.832 -37.22,-16.125 -53.5,-27.602 -11.96,-8.437 -21.9,-11.394 -35.78,-7.023 -54.77,17.238 -111.22,21.379 -168.3,20.547 -4.43,-0.063 -10.92,2.933 -13.03,6.511 -9.32,15.828 -23.1,22.797 -40.75,25.262 -27.46,3.836 -49.52,-6.465 -66.98,-25.996 -19.02,-21.27 -34.83,-45.488 -54.53,-66.051 -46.06,-48.047 -93.27,-95.012 -140.78,-141.637 -11.75,-11.531 -25.93,-20.882 -40.01,-29.605 -5.05,-3.129 -13.1,-1.438 -19.78,-1.945 1.33,6.328 1.05,13.64 4.24,18.828 38.13,61.945 77.95,122.887 114.88,185.519 26.69,45.27 49.02,93.032 56.8,145.868 4.72,32.085 6.68,64.382 -7.18,95.042 -18.56,41.03 -58.7,50.78 -93.53,22.25 -11.54,-9.45 -21.78,-20.96 -30.84,-32.87 -36.01,-47.368 -59.19,-101.243 -77.57,-157.282 -25.88,-78.883 -45.16,-158.754 -39.88,-242.969 1.48,-23.601 -11.63,-43.078 -31.45,-56.039 -21.7,-14.179 -51.96,-4.402 -60.63,19.625 -6.86,19 -10.94,38.977 -17.04,58.274 -4.84,15.265 -9.02,31.191 -16.79,44.98 -13.51,24 -39.22,30.012 -63.39,16.688 -7.22,-3.981 -14.01,-9.117 -20.1,-14.692 -24.17,-22.132 -47.75,-44.914 -72.09,-66.847 -6.88,-6.188 -15.62,-10.317 -28.09,-18.336 -2.2,22.633 -5.77,40.023 -5.16,57.265 1.13,32.153 5.13,64.192 7.15,96.328 3.41,54.2 -6.76,104.883 -44.15,146.61 -13.8,15.394 -25.79,29.308 -24.85,52.297 0.68,16.789 -12.93,27.515 -27.89,28.156 -14.73,0.625 -27.29,-9.141 -30.37,-25.914 -1.94,-10.57 -1.14,-21.656 -1.38,-32.516 -0.12,-5.675 0.65,-11.402 0.18,-17.039 -7.79,-93.316 -34.19,-181.433 -76.18,-264.883 -15.48,-30.753 -34.67,-59.39 -62.34,-80.972 -16.18,-12.617 -25.76,-11.395 -35.3,6.601 -8.92,16.813 -16.32,34.887 -21.24,53.246 -7.78,29.055 -12.3,58.965 -19.32,88.247 -17.31,72.175 -80.76,98.921 -144.561,61.085 -9.789,-5.804 -19.226,-12.613 -27.617,-20.277 -37.039,-33.84 -59.179,-76.609 -68.238,-125.101 -4.492,-24.032 -6.195,-50.028 -2.055,-73.915 8.309,-47.945 54.024,-66.089 95.449,-40.445 8.758,5.43 17.895,11.684 23.961,19.731 19.957,26.464 38.401,54.058 57.871,80.902 3.91,5.395 9.78,9.379 14.75,14.012 3.5,-5.227 7.71,-10.117 10.39,-15.731 12.47,-26.14 21.68,-54.332 37.36,-78.344 26.6,-40.718 68.98,-48.183 108.23,-19.449 18.84,13.793 35.16,32.539 48.64,51.809 48.72,69.633 74.48,149.238 96.49,230.23 1.83,6.727 4.3,13.285 6.47,19.922 1.73,0.496 3.47,0.992 5.21,1.488 4.56,-7.945 12.02,-15.519 13.1,-23.91 2.3,-17.855 2.63,-36.23 1.37,-54.226 -3.08,-44.016 -9.94,-87.977 0.65,-131.848 13.91,-57.566 62.66,-76.148 110.74,-41.414 16.36,11.82 30.51,26.695 45.62,40.227 14.55,13.039 23.2,11.929 33.44,-4.93 8.63,-14.215 16.67,-28.793 25.23,-43.051 12.71,-21.168 31.08,-34.496 55.51,-39.473 40.81,-8.312 80.75,-7.648 118.61,11.977 12.06,6.254 22.04,5.395 35.07,0.039 13.07,-5.371 29.5,-6.254 43.79,-4.269 25.74,3.574 45.34,20.203 63.24,37.925 24.03,23.793 47.02,48.625 71.18,72.278 18,17.621 31.41,13.242 40.61,-9.801 6.87,-17.191 14.55,-34.867 25.7,-49.402 41.67,-54.34 104.75,-55.11 149.08,-2.926 21.07,24.808 33.63,53.535 37.09,85.988 1.65,15.481 2.81,31.016 4.44,46.5 3.6,34.336 15.21,45.727 49.3,47.879 9.85,0.621 19.81,0.609 29.66,0.012 23.76,-1.434 32.03,-10.403 32.18,-34.485 0.04,-6.207 -1.31,-12.433 -1.19,-18.632 0.36,-18.067 -1.09,-36.547 2.22,-54.11 7.61,-40.414 40.51,-65.687 81.85,-64.535 38.24,1.066 72.31,15.641 97.44,43.242 26.41,29 47.86,62.469 71.91,93.649 3.57,4.625 9.54,7.406 14.41,11.046 1.72,-5.488 4.7,-10.921 4.92,-16.46 0.6,-15.504 -0.7,-31.094 0.19,-46.571 0.79,-13.898 7.08,-25.308 21.92,-28.836 14.96,-3.558 25.22,4.532 32.64,16.11 12.9,20.113 25.02,40.718 37.58,61.05 7.84,12.688 15.87,25.258 23.82,37.887 1.83,-0.301 3.65,-0.601 5.48,-0.898 1.4,-10.074 3.46,-20.11 4.09,-30.231 1.49,-24.332 0.71,-48.91 3.81,-73.015 3.88,-30.207 15.29,-57.594 43.7,-73.684 29.15,-16.5 58.82,-10.93 84.44,5.895 24.04,15.789 45.03,36.453 66.31,56.101 14.32,13.227 15.48,14.453 28.46,0.61 19.79,-21.106 44.12,-29.86 72.14,-24.399 58.01,11.305 110.41,34.816 151.13,78.703 12.84,13.836 21.71,31.504 31.37,48.024 5.21,8.925 4.64,19.105 -5.87,24.132 z M 2438.44,123.961 V 19.1719 h 21.83 c 11.85,0 21.18,3.8594 27.97,11.5781 6.78,7.7305 10.17,17.7109 10.17,29.9609 v 21.8985 c 0,12.1211 -3.39,22.0386 -10.17,29.7696 -6.79,7.711 -16.12,11.582 -27.97,11.582 z M 2414.55,0 v 143.141 h 46.4 c 18.15,0 32.93,-5.68 44.29,-17.012 11.37,-11.34 17.06,-25.93 17.06,-43.7501 V 60.6484 c 0,-17.8867 -5.69,-32.4765 -17.06,-43.7382 C 2493.88,5.62109 2479.1,0 2460.95,0 Z m -233.97,0 h -23.89 v 143.141 h 23.89 z m -336.03,78.5508 h 27.72 c 9.57,0 16.55,1.8281 20.94,5.5 4.39,3.6601 6.59,9.2695 6.59,16.8082 0,7.2 -2.17,12.86 -6.49,16.961 -4.33,4.09 -10.91,6.141 -19.76,6.141 h -29 z m 0,-19.1719 V 0 h -23.89 v 143.141 h 52.89 c 15.99,0 28.35,-3.621 37.06,-10.821 8.71,-7.211 13.08,-17.5 13.08,-30.871 0,-7.4099 -1.92,-13.7888 -5.76,-19.1209 -3.83,-5.3398 -9.42,-9.6172 -16.76,-12.8281 8.06,-2.5508 13.86,-6.7305 17.4,-12.5312 3.54,-5.7969 5.31,-12.9297 5.31,-21.3907 V 23.6914 c 0,-4.2031 0.53,-8.3008 1.58,-12.293 1.04,-4.00777 2.81,-7.04684 5.3,-9.13668 V 0 h -24.57 c -2.62,2.16016 -4.32,5.55859 -5.07,10.2188 -0.75,4.6523 -1.13,9.2031 -1.13,13.6718 v 11.5 c 0,7.3282 -2.1,13.168 -6.29,17.5 -4.19,4.3203 -9.96,6.4883 -17.3,6.4883 z M 1510.88,123.961 V 19.1719 h 21.83 c 11.86,0 21.18,3.8594 27.97,11.5781 6.78,7.7305 10.17,17.7109 10.17,29.9609 v 21.8985 c 0,12.1211 -3.39,22.0386 -10.17,29.7696 -6.79,7.711 -16.11,11.582 -27.97,11.582 z M 1486.99,0 v 143.141 h 46.41 c 18.15,0 32.92,-5.68 44.29,-17.012 11.36,-11.34 17.05,-25.93 17.05,-43.7501 V 60.6484 c 0,-17.8867 -5.69,-32.4765 -17.05,-43.7382 C 1566.32,5.62109 1551.55,0 1533.4,0 Z M 1184.3,53.3789 h 42.37 l -20.74,61.1521 h -0.59 z m 49.15,-19.957 h -56.03 L 1166.01,0 h -24.18 l 52.59,143.141 h 22.62 L 1269.04,0 h -24.28 z M 809.148,143.141 850.34,33.0313 h 0.59 l 41.293,110.1097 h 30.965 V 0 h -23.887 v 48.7617 l 2.359,62.0273 -0.59,0.102 L 858.598,0 h -16.024 l -42.273,110.59 -0.59,-0.09 2.359,-61.7383 V 0 h -23.886 v 143.141 h 30.964"
                    id="path12"
                  />
                </g>
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div className="bg-neutral-100">
        <div className="container h-fit py-12 mb-2 md:mb-4 flex flex-col items-center justify-center px-4 gap-y-4">
          <p className="font-light text-md leading-loose md:text-xl md:leading-loose text-neutral-400">
            {t("bariloche-description")}
          </p>
          <a
            href="http://www.tintastyle.es/?lang=en"
            className="w-full flex items-center gap-x-2 py-1 text-md md:text-xl text-neutral-600 hover:text-neutral-700 duration-150">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 6l6 6l-6 6" />
            </svg>
            <span>{t("visit")}</span>
          </a>
        </div>
      </div>

      <div className="max-w-[120rem] mx-auto py-0 px-2 md:px-4">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-2 md:gap-4">
          {images.map(({ src, width, height, isHorizontal }, index) => (
            <Image
              key={index}
              src={src}
              alt={`Bariloche Image ${index + 1}`}
              width={isHorizontal ? width : 1000} // Adjust width for better grid layout
              height={isHorizontal ? height : 2000} // Adjust height for better grid layout
              className={`object-cover h-full w-full ${
                isHorizontal ? "col-span-1 md:col-span-2" : "col-span-1"
              }`}
              priority={index < 3} // Preload the first few images
            />
          ))}
        </div>
      </div>
    </>
  );
}
